# Multi-agent RAG Reporting and Dashboard System

## 專案概述
本專案旨在設計並實現一個輕量級的 AI 系統，該系統能夠自動化地從零售數據庫中提取數據，並生成基於事實、帶有引用的 Excel 報告和互動式網頁儀表板。此系統特別適用於需要快速獲取業務洞察的零售連鎖企業。

## 專案目標
*   從零售數據庫讀取最新的退貨與保固數據。
*   透過多代理協同和 RAG (Retrieval-Augmented Generation) 技術，生成帶有明確引用的敘述性洞察。
*   自動化生成結構化的 Excel 報告（包含表格和圖表）。
*   自動化生成互動式網頁儀表板（包含條形圖、折線圖及敘述性摘要）。

## 架構設計
本系統採用高層次的多代理架構，確保模組化、靈活性和可擴展性。核心組件包括：
*   **數據獲取代理 (Data Fetcher Agent)**：負責從零售數據庫提取原始數據。
*   **報告代理 (Report Agent)**：協調整個報告生成流程，接收用戶查詢，並對原始數據進行正規化處理。
*   **RAG 核心 (RAG Core)**：系統的智能核心，負責將原始數據轉化為可檢索的向量，並根據查詢檢索相關信息，結合大型語言模型生成洞察。
*   **Excel 代理 (Excel Agent)**：專注於將洞察和數據轉化為 Excel 報告。
*   **儀表板代理 (Dashboard Agent)**：專注於生成互動式網頁儀表板。
*   **用戶界面 (User Interface)**：提供用戶與系統交互的入口。

詳細的架構圖請參考 `RAG零售.mmd` 檔案。

## 技術深度與實踐細節
本系統的 RAG 核心設計融入了多項先進技術與實踐：

### 1. 數據攝取與嵌入 (Data Ingestion & Embedding)
*   **實踐細節**：原始數據（如退貨與保固記錄）首先會經過嚴格的清洗與預處理，去除雜訊並標準化格式。隨後，數據會被切分為大小適中、語義連貫的「塊」(chunks)，並提取相關元數據（如時間戳、產品ID、地區等）。這些文本塊透過預訓練的**嵌入模型**（例如：Google 的 Universal Sentence Encoder 或 OpenAI 的 text-embedding-ada-002）轉換為高維向量。選擇這些模型是基於其在多領域文本理解上的卓越性能和生成高質量語義嵌入的能力，確保後續檢索的精準度。
*   **技術考量**：分塊策略會平衡上下文完整性與檢索效率；元數據的提取則為後續的過濾和精確檢索提供關鍵依據。**對於零售數據集，其包含大量非結構化文本（如客戶評論、產品描述、故障報告），這些模型能有效捕捉語義，將其轉化為可量化的向量，為精準分析和洞察奠定基礎。**

### 2. 向量資料庫 (Vector Database)
*   **實踐細節**：生成的向量嵌入會被儲存在專為高效相似性搜索設計的**向量資料庫**中（例如：Pinecone, ChromaDB 或 Weaviate）。這些資料庫利用先進的索引技術（如 HNSW - Hierarchical Navigable Small Worlds）來優化近似最近鄰 (ANN) 搜索，即使面對海量數據也能實現毫秒級的檢索響應。同時，元數據的儲存允許在檢索時進行精確過濾，例如按時間範圍或產品類別檢索。
*   **技術考量**：選擇這些雲原生或易於部署的向量資料庫，是為了確保系統的可擴展性、低延遲和高可用性，以應對零售數據的快速增長和實時查詢需求。**零售數據集通常規模龐大且增長迅速，這些向量資料庫的高可擴展性和低延遲特性，確保了從海量數據中快速檢索相關信息的效率，這對於及時生成報告和儀表板至關重要。**

### 3. 查詢處理與檢索 (Query Processing & Retrieval)
*   **實踐細節**：用戶的自然語言查詢（例如：「上季度高退貨率產品的根本原因」）會使用與數據攝取階段**相同的嵌入模型**轉換為查詢向量，以確保向量空間的一致性。隨後，這個查詢向量會在向量資料庫中執行**相似性搜索**（通常採用餘弦相似度），檢索出與查詢語義最相關的 Top-K 個數據塊。為進一步提升相關性，可選地引入**重排序模型**（如基於 Cross-Encoder 的模型），對初步檢索結果進行二次評分和排序。
*   **技術考量**：保持嵌入模型一致性是確保檢索精度的關鍵；相似性搜索算法的選擇則平衡了檢索速度與準確性；重排序機制則能有效過濾掉語義相關但內容不精確的數據塊。

### 4. LLM 整合與響應生成 (LLM Integration & Response Generation)
*   **實踐細節**：檢索到的相關數據塊、用戶原始查詢以及一個精心設計的**系統提示 (System Prompt)** 會被一同送入大型語言模型（LLM，例如：Gemini 系列模型）。系統提示會明確指示 LLM 的角色、輸出格式、以及如何利用提供的上下文生成洞察。LLM 會被引導進行**思維鏈 (Chain-of-Thought)** 推理，並從提供的數據塊中提取關鍵資訊，生成**帶有明確引用的敘述性洞察**。引用機制確保了洞察的可追溯性和事實性。
*   **技術考量**：提示工程是引導 LLM 行為的關鍵，確保其輸出符合預期；結合檢索到的上下文能顯著降低 LLM 的「幻覺」現象，提升洞察的可靠性；自動生成引用則增強了報告的透明度和可信度。**在零售場景中，洞察的準確性和可追溯性至關重要。RAG 結合 LLM 的能力，能夠從具體的退貨或保固記錄中提取並總結原因，並提供原始數據的引用，極大降低了「幻覺」風險，確保了報告內容的真實性和業務決策的可靠性。**

## 技術棧
*   **圖表繪製**：Mermaid
*   **嵌入模型**：Google Universal Sentence Encoder / OpenAI text-embedding-ada-002 (示例)
*   **向量資料庫**：Pinecone / ChromaDB / Weaviate (示例)
*   **大型語言模型**：Gemini 系列模型 (示例)

## 檔案結構
*   `作業要求.txt`: 原始專案任務要求。
*   `設計說明.txt`: 詳細的系統設計選擇與技術實踐說明。
*   `RAG零售.mmd`: 系統的高層次多代理架構圖（Mermaid 格式）。
*   `RAG零售.png`: `RAG零售.mmd` 渲染後的圖像。
*   `README.md`: 本專案的概覽與說明 (即本文件)。

## 如何查看圖表
請使用支持 Mermaid 語法的 Markdown 渲染器（例如 GitHub、VS Code 的 Markdown 預覽）打開 `RAG零售.mmd` 檔案以查看系統架構圖。
